package fr.umontpellier.campus.domain;

import jakarta.persistence.EmbeddedId;
import jakarta.persistence.Entity;
import jakarta.persistence.FetchType;
import jakarta.persistence.JoinColumn;
import jakarta.persistence.ManyToOne;
import jakarta.persistence.MapsId;
import jakarta.persistence.Table;

@Entity
@Table(name = "exploite")
public class Exploite {
  @EmbeddedId
  private ExploiteId id;

  @ManyToOne(fetch = FetchType.LAZY)
  @MapsId("team")
  @JoinColumn(name = "team")
  private Composante composante;

  @ManyToOne(fetch = FetchType.LAZY)
  @MapsId("building")
  @JoinColumn(name = "building")
  private Batiment batiment;

  public Exploite() {}

  public Exploite(Composante composante, Batiment batiment) {
    this.composante = composante;
    this.batiment = batiment;
    this.id = new ExploiteId(composante.getAcronyme(), batiment.getCodeB());
  }

  public ExploiteId getId() {
    return id;
  }

  public void setId(ExploiteId id) {
    this.id = id;
  }

  public Composante getComposante() {
    return composante;
  }

  public void setComposante(Composante composante) {
    this.composante = composante;
  }

  public Batiment getBatiment() {
    return batiment;
  }

  public void setBatiment(Batiment batiment) {
    this.batiment = batiment;
  }
}
